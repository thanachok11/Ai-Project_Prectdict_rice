<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <title>üåæ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

    <style>
        body {
            font-family: "Kanit", sans-serif;
            background: #f4f9f4;
            padding: 20px;
            color: #333;
        }

        h1,
        h2 {
            text-align: center;
            color: #2e7d32;
        }

        section {
            background: #fff;
            padding: 20px;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            max-width: 960px;
        }

        form {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
            color: #2e7d32;
        }

        select,
        input {
            padding: 8px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        button {
            padding: 10px 20px;
            background: #2e7d32;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        button:hover {
            background: #276529;
        }

        canvas {
            margin: 20px auto;
            display: block;
            max-width: 900px;
        }

        .result-box {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: #2e7d32;
        }
    </style>
</head>

<body>
    <h1>üåæ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</h1>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß -->
    <section>
        <h2>1. ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß</h2>
        <form method="post">
            <input type="hidden" name="action" value="predict">

            <label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
            <select name="province" required>
                {% for p in provinces %}
                <option value="{{ p }}" {% if selected_province==p %}selected{% endif %}>{{ p }}</option>
                {% endfor %}
            </select>

            <label>‡∏õ‡∏µ:</label>
            <input type="number" name="year" min="2020" value="{{ selected_year or 2024 }}" required>

            <label>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
            <input type="number" name="month" min="1" max="12" value="{{ selected_month or 1 }}" required>

            <label>‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≤‡∏ß:</label>
            <select name="rice_type" required>
                <option value="RiceMali" {% if selected_rice_type=='RiceMali' %}selected{% endif %}>‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏≠‡∏°‡∏°‡∏∞‡∏•‡∏¥</option>
                <option value="Long grain" {% if selected_rice_type=='Long grain' %}selected{% endif %}>
                    ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡πÄ‡∏°‡∏•‡πá‡∏î‡∏¢‡∏≤‡∏ß</option>
                <option value="Short grain" {% if selected_rice_type=='Short grain' %}selected{% endif %}>
                    ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡πÄ‡∏°‡∏•‡πá‡∏î‡∏™‡∏±‡πâ‡∏ô</option>
            </select>

            <button type="submit">‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå</button>
        </form>

        {% if prediction is not none %}
        <div class="result-box">
            üìà ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå: {{ "{:,.2f}".format(prediction) if prediction is number else prediction }} ‡∏ö‡∏≤‡∏ó
        </div>
        {% endif %}
    </section>
    <div class="container">
        <h1>üìà Dashboard ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß</h1>
        <label for="yearSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ:</label>
        <select id="yearSelect"></select>
        <label for="monthSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
        <select id="monthSelect">
            <option value="0">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
            <option value="1">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°</option>
            <option value="2">‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
            <option value="3">‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°</option>
            <option value="4">‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô</option>
            <option value="5">‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°</option>
            <option value="6">‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô</option>
            <option value="7">‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°</option>
            <option value="8">‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°</option>
            <option value="9">‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô</option>
            <option value="10">‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°</option>
            <option value="11">‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô</option>
            <option value="12">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°</option>
        </select>

        <label for="riceTypeSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≤‡∏ß:</label>
        <select id="riceTypeSelect"></select>

        <p id="minMaxText" style="margin-top: 10px; font-weight: bold;"></p>

        <canvas id="lineChart" width="800" height="300"></canvas>
        <div id="pieChart3D" style="width: 800px; height: 400px;"></div>


    </div>
    <div class="container1">
        <hr />
        <h2>üåßÔ∏è ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ù‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h2>
        <label for="rainYearSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ù‡∏ô:</label>
        <select id="rainYearSelect"></select>
        <label for="rainMonthSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ù‡∏ô:</label>
        <select id="rainMonthSelect">
            <option value="0">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
            <option value="1">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°</option>
            <option value="2">‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
            <option value="3">‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°</option>
            <option value="4">‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô</option>
            <option value="5">‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°</option>
            <option value="6">‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô</option>
            <option value="7">‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°</option>
            <option value="8">‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°</option>
            <option value="9">‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô</option>
            <option value="10">‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°</option>
            <option value="11">‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô</option>
            <option value="12">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°</option>
        </select>
        <label for="provinceSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
        <select id="provinceSelect"></select>


        <canvas id="rainChart" width="800" height="300"></canvas>
    </div>

    <script>
        const rainCSVUrl = "{{ url_for('static', filename='rain.csv') }}";
        const riceCSVUrl = "{{ url_for('static', filename='rice.csv') }}";
    </script>
    <script type="module" src="{{ url_for('static', filename='script.js') }}"></script>

</body>

</html>